-- Caffeine replacement

local module = {}

local onIcon = [[ASCII:
.....1a..........AC..........E
..............................
......4.......................
1..........aA..........CE.....
e.2......4.3...........h......
..............................
..............................
.......................h......
e.2......6.3..........t..q....
5..........c..........s.......
......6..................q....
......................s..t....
.....5c.......................
]]

local offIcon = [[ASCII:
.....1a.....x....AC.y.......zE
..............................
......4.......................
1..........aA..........CE.....
e.2......4.3...........h......
..............................
..............................
.......................h......
e.2......6.3..........t..q....
5..........c..........s.......
......6..................q....
......................s..t....
...x.5c....y.......z..........
]]

local menu = hs.menubar.new()

function setIcon(state)
  menu:setIcon(state and onIcon or offIcon)
end

function clickCallback()
  setIcon(hs.caffeinate.toggle("displayIdle"))
end

menu:setClickCallback(clickCallback)
setIcon(hs.caffeinate.get("displayIdle"))

module.menu = menu
